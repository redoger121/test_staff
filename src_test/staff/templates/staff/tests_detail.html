{%extends 'staff/base.html'%}


{%block content%}

<section class="test__section ">
    <div class="user__container test__container">
        <div class="test__wrapper">
            <h1 class="test__title">
                <div class="test__buttons__wrapper">
                    <div class="test__buttons__flex-wrapper">
                        <a href="#ex4" rel="modal:open" class="left-side__button" data-title="Изменить название">

                            <svg enable-background="new 0 0 64 64" height="64px" id="Layer_1" version="1.1"
                                 viewBox="0 0 64 64" width="64px" xml:space="preserve"
                                 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g>
                                            <path
                                                    d="M55.736,13.636l-4.368-4.362c-0.451-0.451-1.044-0.677-1.636-0.677c-0.592,0-1.184,0.225-1.635,0.676l-3.494,3.484   l7.639,7.626l3.494-3.483C56.639,15.998,56.639,14.535,55.736,13.636z"/>
                                            <polygon
                                                    points="21.922,35.396 29.562,43.023 50.607,22.017 42.967,14.39  "/>
                                            <polygon points="20.273,37.028 18.642,46.28 27.913,44.654  "/>
                                            <path
                                                    d="M41.393,50.403H12.587V21.597h20.329l5.01-5H10.82c-1.779,0-3.234,1.455-3.234,3.234v32.339   c0,1.779,1.455,3.234,3.234,3.234h32.339c1.779,0,3.234-1.455,3.234-3.234V29.049l-5,4.991V50.403z"/>
                                        </g>
                                    </svg>
                        </a>
                        <a href="{%url 'staff:add_questions_to_test' test.pk%}" class="left-side__button" data-title="Добавить вопрос">

                            <svg width="30px" height="30px" viewBox="0 0 24 24" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path
                                        d="M13.5 3C13.5 2.44772 13.0523 2 12.5 2H11.5C10.9477 2 10.5 2.44772 10.5 3V10.5H3C2.44772 10.5 2 10.9477 2 11.5V12.5C2 13.0523 2.44772 13.5 3 13.5H10.5V21C10.5 21.5523 10.9477 22 11.5 22H12.5C13.0523 22 13.5 21.5523 13.5 21V13.5H21C21.5523 13.5 22 13.0523 22 12.5V11.5C22 10.9477 21.5523 10.5 21 10.5H13.5V3Z"/>
                            </svg>
                        </a>
                        <a href="#delete{{test.pk}}" rel="modal:open" class="left-side__button"
                           data-title="Удалить тест">

                            <svg enable-background="new 0 0 40 40" id="Слой_1" version="1.1" viewBox="0 0 40 40"
                                 xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
                                 xmlns:xlink="http://www.w3.org/1999/xlink">
                                <g>
                                    <path
                                            d="M28,40H11.8c-3.3,0-5.9-2.7-5.9-5.9V16c0-0.6,0.4-1,1-1s1,0.4,1,1v18.1c0,2.2,1.8,3.9,3.9,3.9H28c2.2,0,3.9-1.8,3.9-3.9V16   c0-0.6,0.4-1,1-1s1,0.4,1,1v18.1C33.9,37.3,31.2,40,28,40z"/>
                                </g>
                                <g>
                                    <path
                                            d="M33.3,4.9h-7.6C25.2,2.1,22.8,0,19.9,0s-5.3,2.1-5.8,4.9H6.5c-2.3,0-4.1,1.8-4.1,4.1S4.2,13,6.5,13h26.9   c2.3,0,4.1-1.8,4.1-4.1S35.6,4.9,33.3,4.9z M19.9,2c1.8,0,3.3,1.2,3.7,2.9h-7.5C16.6,3.2,18.1,2,19.9,2z M33.3,11H6.5   c-1.1,0-2.1-0.9-2.1-2.1c0-1.1,0.9-2.1,2.1-2.1h26.9c1.1,0,2.1,0.9,2.1,2.1C35.4,10.1,34.5,11,33.3,11z"/>
                                </g>
                                <g>
                                    <path
                                            d="M12.9,35.1c-0.6,0-1-0.4-1-1V17.4c0-0.6,0.4-1,1-1s1,0.4,1,1v16.7C13.9,34.6,13.4,35.1,12.9,35.1z"/>
                                </g>
                                <g>
                                    <path
                                            d="M26.9,35.1c-0.6,0-1-0.4-1-1V17.4c0-0.6,0.4-1,1-1s1,0.4,1,1v16.7C27.9,34.6,27.4,35.1,26.9,35.1z"/>
                                </g>
                                <g>
                                    <path
                                            d="M19.9,35.1c-0.6,0-1-0.4-1-1V17.4c0-0.6,0.4-1,1-1s1,0.4,1,1v16.7C20.9,34.6,20.4,35.1,19.9,35.1z"/>
                                </g>
                            </svg>
                        </a>
                    </div>
                </div>
                {{test.name}}

            </h1>



            <div id="delete{{test.pk}}" class="modal modal-delete">
                <div class="modal__container">
                    <form action="{%url 'staff:delete_test' test.pk %}" class="find-form" method="post">
                        {% csrf_token %}
                        <p class="answer__is-true answer__delete">Удалить тест?</p>

                        <button type="submit" class="delete-button">Удалить</button>
                        <a href="#close-modal" class="nodelete-button" rel="modal:close">Отмена</a>

                    </form>

                </div>
            </div>
        </div>
  <div id="ex4" class="modal modal-input">
                <div class="modal__container">
                    <form action="" class="find-form" method="post">
                        {% csrf_token %}
                        {{test_name_form.as_p}}

                        <div class="accept-button__wrapper">

                            <button type="submit" class="accept-button"></button>
                        </div>
                    </form>

                </div>
            </div>

        {% for question in questions%}
        <h2 class="test__title">Вопрос №{{ forloop.counter}} </h2>

        <div class="test__wrapper">

            <div class="answer__wrapper question__wrapper">
                <p class="test__question test__question-newstyle">{{question.name}}</p>
                <a class="left-side__button" href="#{{question.pk}}" rel="modal:open" data-title="Изменить вопрос">
                    <svg enable-background="new 0 0 64 64" height="64px" id="Layer_1" version="1.1"
                         viewBox="0 0 64 64" width="64px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
                         xmlns:xlink="http://www.w3.org/1999/xlink">
                                <g>
                                    <path
                                            d="M55.736,13.636l-4.368-4.362c-0.451-0.451-1.044-0.677-1.636-0.677c-0.592,0-1.184,0.225-1.635,0.676l-3.494,3.484   l7.639,7.626l3.494-3.483C56.639,15.998,56.639,14.535,55.736,13.636z"/>
                                    <polygon points="21.922,35.396 29.562,43.023 50.607,22.017 42.967,14.39  "/>
                                    <polygon points="20.273,37.028 18.642,46.28 27.913,44.654  "/>
                                    <path
                                            d="M41.393,50.403H12.587V21.597h20.329l5.01-5H10.82c-1.779,0-3.234,1.455-3.234,3.234v32.339   c0,1.779,1.455,3.234,3.234,3.234h32.339c1.779,0,3.234-1.455,3.234-3.234V29.049l-5,4.991V50.403z"/>
                                </g>
                            </svg>
                </a>

                <a href="{%url 'staff:add_answer_to_question' question.pk %}" class="left-side__button"
                   data-title="Добавить ответ">

                    <svg width="30px" height="30px" viewBox="0 0 24 24" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path
                                d="M13.5 3C13.5 2.44772 13.0523 2 12.5 2H11.5C10.9477 2 10.5 2.44772 10.5 3V10.5H3C2.44772 10.5 2 10.9477 2 11.5V12.5C2 13.0523 2.44772 13.5 3 13.5H10.5V21C10.5 21.5523 10.9477 22 11.5 22H12.5C13.0523 22 13.5 21.5523 13.5 21V13.5H21C21.5523 13.5 22 13.0523 22 12.5V11.5C22 10.9477 21.5523 10.5 21 10.5H13.5V3Z"/>
                    </svg>
                </a>
                <a href="#delete{{question.pk}}" rel="modal:open" class="left-side__button"
                   data-title="Удалить вопрос">
                    <svg enable-background="new 0 0 40 40" id="Слой_1" version="1.1" viewBox="0 0 40 40"
                         xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
                         xmlns:xlink="http://www.w3.org/1999/xlink">
                                <g>
                                    <path
                                            d="M28,40H11.8c-3.3,0-5.9-2.7-5.9-5.9V16c0-0.6,0.4-1,1-1s1,0.4,1,1v18.1c0,2.2,1.8,3.9,3.9,3.9H28c2.2,0,3.9-1.8,3.9-3.9V16   c0-0.6,0.4-1,1-1s1,0.4,1,1v18.1C33.9,37.3,31.2,40,28,40z"/>
                                </g>
                        <g>
                                    <path
                                            d="M33.3,4.9h-7.6C25.2,2.1,22.8,0,19.9,0s-5.3,2.1-5.8,4.9H6.5c-2.3,0-4.1,1.8-4.1,4.1S4.2,13,6.5,13h26.9   c2.3,0,4.1-1.8,4.1-4.1S35.6,4.9,33.3,4.9z M19.9,2c1.8,0,3.3,1.2,3.7,2.9h-7.5C16.6,3.2,18.1,2,19.9,2z M33.3,11H6.5   c-1.1,0-2.1-0.9-2.1-2.1c0-1.1,0.9-2.1,2.1-2.1h26.9c1.1,0,2.1,0.9,2.1,2.1C35.4,10.1,34.5,11,33.3,11z"/>
                                </g>
                        <g>
                                    <path
                                            d="M12.9,35.1c-0.6,0-1-0.4-1-1V17.4c0-0.6,0.4-1,1-1s1,0.4,1,1v16.7C13.9,34.6,13.4,35.1,12.9,35.1z"/>
                                </g>
                        <g>
                                    <path
                                            d="M26.9,35.1c-0.6,0-1-0.4-1-1V17.4c0-0.6,0.4-1,1-1s1,0.4,1,1v16.7C27.9,34.6,27.4,35.1,26.9,35.1z"/>
                                </g>
                        <g>
                                    <path
                                            d="M19.9,35.1c-0.6,0-1-0.4-1-1V17.4c0-0.6,0.4-1,1-1s1,0.4,1,1v16.7C20.9,34.6,20.4,35.1,19.9,35.1z"/>
                                </g>
                            </svg>
                </a>
            </div>


            <div id="{{question.pk}}" class="modal modal-input">
                <div class="modal__container">


                    <form action="" class="find-form" method="post">
                        {% csrf_token %}
                        {{form_question.management_form}}

                        {%for form in form_question %}
                        {%if form.id.value == question.pk %}
                        {{form.as_p}}
                        {%endif%}
                        {%endfor%}

                        <div class="accept-button__wrapper">

                            <button type="submit" class="accept-button"></button>
                        </div>
                    </form>


                </div>
            </div>

            {%for answer in answers%}


            {%if answer.for_question_id == question.pk%}
            <div class="answer__wrapper">
                <p class="answer__text">{{answer.name}}</p>

                <a href="#{{answer.pk}}" rel="modal:open" class="left-side__button" data-title="Изменить вопрос">
                    <svg enable-background="new 0 0 64 64" height="64px" id="Layer_1" version="1.1"
                         viewBox="0 0 64 64" width="64px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
                         xmlns:xlink="http://www.w3.org/1999/xlink">
                                <g>
                                    <path
                                            d="M55.736,13.636l-4.368-4.362c-0.451-0.451-1.044-0.677-1.636-0.677c-0.592,0-1.184,0.225-1.635,0.676l-3.494,3.484   l7.639,7.626l3.494-3.483C56.639,15.998,56.639,14.535,55.736,13.636z"/>
                                    <polygon points="21.922,35.396 29.562,43.023 50.607,22.017 42.967,14.39  "/>
                                    <polygon points="20.273,37.028 18.642,46.28 27.913,44.654  "/>
                                    <path
                                            d="M41.393,50.403H12.587V21.597h20.329l5.01-5H10.82c-1.779,0-3.234,1.455-3.234,3.234v32.339   c0,1.779,1.455,3.234,3.234,3.234h32.339c1.779,0,3.234-1.455,3.234-3.234V29.049l-5,4.991V50.403z"/>
                                </g>
                            </svg>
                </a>
                <a href="#delete{{answer.pk}}" rel="modal:open" class="left-side__button" data-title="Удалить ответ">
                    <svg enable-background="new 0 0 40 40" id="Слой_1" version="1.1" viewBox="0 0 40 40"
                         xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
                         xmlns:xlink="http://www.w3.org/1999/xlink">
                                <g>
                                    <path
                                            d="M28,40H11.8c-3.3,0-5.9-2.7-5.9-5.9V16c0-0.6,0.4-1,1-1s1,0.4,1,1v18.1c0,2.2,1.8,3.9,3.9,3.9H28c2.2,0,3.9-1.8,3.9-3.9V16   c0-0.6,0.4-1,1-1s1,0.4,1,1v18.1C33.9,37.3,31.2,40,28,40z"/>
                                </g>
                        <g>
                                    <path
                                            d="M33.3,4.9h-7.6C25.2,2.1,22.8,0,19.9,0s-5.3,2.1-5.8,4.9H6.5c-2.3,0-4.1,1.8-4.1,4.1S4.2,13,6.5,13h26.9   c2.3,0,4.1-1.8,4.1-4.1S35.6,4.9,33.3,4.9z M19.9,2c1.8,0,3.3,1.2,3.7,2.9h-7.5C16.6,3.2,18.1,2,19.9,2z M33.3,11H6.5   c-1.1,0-2.1-0.9-2.1-2.1c0-1.1,0.9-2.1,2.1-2.1h26.9c1.1,0,2.1,0.9,2.1,2.1C35.4,10.1,34.5,11,33.3,11z"/>
                                </g>
                        <g>
                                    <path
                                            d="M12.9,35.1c-0.6,0-1-0.4-1-1V17.4c0-0.6,0.4-1,1-1s1,0.4,1,1v16.7C13.9,34.6,13.4,35.1,12.9,35.1z"/>
                                </g>
                        <g>
                                    <path
                                            d="M26.9,35.1c-0.6,0-1-0.4-1-1V17.4c0-0.6,0.4-1,1-1s1,0.4,1,1v16.7C27.9,34.6,27.4,35.1,26.9,35.1z"/>
                                </g>
                        <g>
                                    <path
                                            d="M19.9,35.1c-0.6,0-1-0.4-1-1V17.4c0-0.6,0.4-1,1-1s1,0.4,1,1v16.7C20.9,34.6,20.4,35.1,19.9,35.1z"/>
                                </g>
                            </svg>
                </a>
            </div>
            {%endif%}


            <div id="delete{{answer.pk}}" class="modal modal-delete">
                <div class="modal__container">
                    <form action="{%url 'staff:delete_answer' answer.pk %}" class="find-form" method="post">
                        {% csrf_token %}
                        <p class="answer__is-true answer__delete">Удалить ответ?</p>

                        <button type="submit" class="delete-button">Удалить</button>
                        <a href="#close-modal" class="nodelete-button" rel="modal:close">Отмена</a>

                    </form>

                </div>
            </div>

            <div id="delete{{question.pk}}" class="modal modal-delete">
                <div class="modal__container">
                    <form action="{%url 'staff:delete_question' question.pk %}" class="find-form" method="post">
                        {% csrf_token %}
                        <p class="answer__is-true answer__delete">Удалить вопрос?</p>

                        <button type="submit" class="delete-button">Удалить</button>
                        <a href="#close-modal" class="nodelete-button" rel="modal:close">Отмена</a>

                    </form>

                </div>
            </div>

            <div id="{{answer.pk}}" class="modal modal-input  modal__answer-input">
                <div class="modal__container">

                    <form action="" class="find-form" method="post">
                        {% csrf_token %}
                        {{ answer_formset.management_form}}
                        {%for form in answer_formset %}
                        {%if form.id.value == answer.pk%}
                        {{form.as_p}}
                        {%endif%}
                        {%endfor%}


                        <div class="accept-button__wrapper">
                            <button type="submit" class="accept-button"></button>

                        </div>
                    </form>

                </div>
            </div>


            {%endfor%}


        </div>

        {%endfor%}


    </div>
</section>


{%endblock%}